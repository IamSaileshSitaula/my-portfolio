<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Sailesh Sitaula - Industrial Engineer Portfolio. Expertise in data analysis, robotics, and sustainable engineering solutions." />
    <meta name="keywords" content="Sailesh Sitaula, Industrial Engineer, Data Analyst, Robotics, Sustainability, Engineering Portfolio" />
    <meta name="author" content="Sailesh Sitaula" />

    <title>Sailesh Sitaula | Industrial Engineer - Cold Storage Analytics</title>

    <link rel="icon" href="image/icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        /* Base Styles */
        :root {
            --primary-color: #2563eb;
            --secondary-color: #0f172a;
            --accent-color: #38bdf8;
            --text-color: #334155;
            --light-bg: #f8fafc;
            --dark-bg: #1e293b;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            color: var(--secondary-color);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        h1 {
            font-size: 2.5rem;
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -10px;
            width: 50px;
            height: 4px;
            background: var(--primary-color);
        }

        h3 {
            font-size: 1.5rem;
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        a:hover {
            color: var(--accent-color);
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-title h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .section-title h2::after {
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
        }

        .section-title p {
            color: var(--text-color);
            max-width: 700px;
            margin: 0 auto;
        }

        .text-center {
            text-align: center;
        }

        .btn {
            display: inline-block;
            background: var(--primary-color);
            color: #fff;
            padding: 12px 25px;
            border-radius: 50px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2);
        }

        .btn:hover {
            background: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(56, 189, 248, 0.2);
            color: #fff;
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: #fff;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
    
        /* Footer Styles */
        /* =============================================
   FOOTER: MONOCHROME & TYPOGRAPHIC
   (Matches other Monochrome models)
   ============================================= */

        /* Main footer container */
        .footer {
        /* A deep, near-black for a strong foundation.
            This would correspond to your var(--background-color-dark). */
        background-color: #181818; 
        padding: 2.5rem 1rem;
        text-align: center;
        }

        /* Wrapper for the footer content */
        .footer-content {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 800px; /* Constrain width for very large screens */
        margin: 0 auto;
        }

        /* Copyright text and other paragraphs in the footer */
        .footer p {
        margin: 0;

        /* Use the monospace font for consistency with other "detail" text */
        font-family: 'Inconsolata', monospace;
        font-size: 0.9rem;
        letter-spacing: 0.5px;

        /* A soft, light grey is easier on the eyes than pure white.
            This would correspond to your var(--text-color-light). */
        color: #a0a0a0; 
        }

        /* Optional: Styling for any links you might add to the footer */
        .footer a {
        color: #ddd; /* Make links slightly brighter than the surrounding text */
        text-decoration: none;
        font-weight: 600;
        transition: color 0.3s ease;
        }

        .footer a:hover {
        color: #fff; /* Brighten to pure white on hover */
        }

                /* Header Styles */
        /* =============================================
        HEADER: MONOCHROME & TYPOGRAPHIC
        (Matches other Monochrome models)
        ============================================= */

        /* Main header container */
        #header {
        background-color: #fff; /* A clean white, sticky background */
        padding: 1.5rem 1rem;
        border-bottom: 1px solid #eee; /* Subtle separator line */
        position: sticky;
        top: 0;
        z-index: 1000;
        width: 100%;
        }

        /* Flex container for logo and navigation */
        .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1200px; /* Or your site's max-width */
        margin: 0 auto;
        }

        /* The logo text */
        .logo {
        font-family: 'Inconsolata', monospace; /* Consistent strong font */
        font-size: 1.6rem;
        font-weight: 700;
        color: #111; /* Main dark color */
        text-decoration: none;
        }

        /* The part of the logo that was previously colored */
        .logo span {
        color: #999; /* A mid-grey for subtle contrast without color */
        font-weight: 400; /* Lighter weight can also create contrast */
        }

        /* --- Navigation Menu --- */

        .nav-menu .nav-list {
        list-style: none;
        display: flex;
        margin: 0;
        padding: 0;
        }

        .nav-item {
        margin-left: 2.5rem;
        }

        .nav-link {
        font-family: 'Inconsolata', monospace; /* A clean, readable font for links */
        color: #333;
        font-weight: 500;
        font-size: 1.4rem;
        text-decoration: none;
        padding: 0.5rem 0;
        position: relative;
        transition: color 0.3s ease;
        }

        /* Hover effect for links */
        .nav-link:hover {
            color: #111; /* Darken the text color on hover */
        }


        /* The underline effect on hover */
        .nav-link::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 0;
        background-color: #111; /* Main dark color for the underline */
        transition: width 0.3s ease-out;
        }

        .nav-link:hover::after {
        width: 100%;
        }


        /* --- Hamburger Icon for Mobile --- */

        .hamburger {
        display: none; /* This will be overridden in your responsive CSS */
        flex-direction: column;
        cursor: pointer;
        }

        .hamburger .bar {
        width: 25px;
        height: 3px;
        background-color: #111; /* Main dark color for the bars */
        margin: 4px 0;
        transition: 0.3s;
        }
        /* General Card/Panel Styling */
        .card-panel {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            padding: 30px;
            transition: all 0.3s ease;
        }
        .card-panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }
        .grid-layout {
            display: grid;
            gap: 30px; /* Standard gap from index.html */
        }
        .grid-cols-3 {
            grid-template-columns: repeat(3, 1fr);
        }
        .grid-cols-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        .flex-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 350px; /* Adjusted height */
        }
        .table-container {
            overflow-x: auto;
        }
        .table-sortable th {
            cursor: pointer;
            background-color: var(--light-bg);
            color: var(--secondary-color);
            padding: 12px 24px;
            text-align: left;
            font-size: 0.8rem;
            text-transform: uppercase;
            font-weight: 600;
            border-bottom: 2px solid var(--border-color);
        }
        .table-sortable th:hover {
            background-color: var(--border-color);
        }
        .table-sortable th.sorted-asc::after { content: ' ▲'; }
        .table-sortable th.sorted-desc::after { content: ' ▼'; }
        .table-sortable td {
            padding: 12px 24px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-color);
            font-size: 0.95rem;
        }
        .table-sortable tbody tr:hover {
            background-color: var(--light-bg);
        }
        .table-sortable tbody tr.highlighted {
            background-color: rgba(37, 99, 235, 0.1); /* Use primary color for highlight */
        }


        /* Responsive Styles from index.html */
        @media screen and (max-width: 1200px) {
            .about-content {
                grid-template-columns: 1fr;
                gap: 90px;
            }
            .about-image {
                max-width: 500px;
                margin: 0 auto;
            }
        }
        @media screen and (max-width: 991px) {
            .section {
                padding: 70px 0;
            }
            .timeline::after {
                left: 31px;
            }
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 0;
            }
            .timeline-item:nth-child(even) {
                left: 0;
            }
            .timeline-item::after {
                left: 18px;
            }
            .contact-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            .modal-body {
                grid-template-columns: 1fr;
            }
            .grid-cols-3, .grid-cols-2 {
                grid-template-columns: 1fr; /* Stack columns on smaller screens */
            }
            .lg-col-span-2 {
                grid-column: span 1;
            }
        }
        @media screen and (max-width: 767px) {
            .section {
                padding: 60px 0;
            }
            .section-title h2 {
                font-size: 2rem;
            }
            h2 {
                font-size: 1.8rem;
            }
            h3 {
                font-size: 1.3rem;
            }
            .hamburger {
                display: block;
            }
            .hamburger.active .bar:nth-child(1) {
                transform: translateY(8px) rotate(45deg);
            }
            .hamburger.active .bar:nth-child(2) {
                opacity: 0;
            }
            .hamburger.active .bar:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }
            .nav-menu {
                position: fixed;
                right: -100%;
                top: 80px;
                flex-direction: column;
                background-color: #fff;
                width: 80%;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                padding: 20px 0;
                border-radius: 10px;
                transition: all 0.3s ease;
            }
            .nav-menu.active {
                right: 10%;
            }
            .nav-list {
                flex-direction: column;
                width: 100%;
            }
            .nav-item {
                margin: 15px 0;
            }
        }
        @media screen and (max-width: 480px) {
            .btn {
                font-size: 0.8rem;
                padding: 10px 20px;
            }
            .section-title h2 {
                font-size: 1.8rem;
            }
            .timeline-content {
                padding: 20px;
            }
            .skill-item {
                margin-bottom: 15px;
            }
            .info-item {
                grid-column: span 2;
            }
            .modal-content {
                padding: 20px;
                width: 95%;
            }
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
        }

        /* Specific styles for this project page */
        .dashboard-info-card {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            padding: 20px;
            text-align: center;
        }
        .dashboard-info-card h3 {
            font-size: 0.9rem;
            color: var(--text-color);
            margin-bottom: 5px;
        }
        .dashboard-info-card p:first-of-type {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        .dashboard-info-card p:last-of-type {
            font-size: 0.85rem;
            color: var(--text-color);
        }
        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            text-align: center;
            transition: all 0.3s ease;
        }
        .process-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .process-step .icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        .process-step h4 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .process-step p {
            font-size: 0.9rem;
            color: var(--text-color);
        }

        .range-slider-group {
            margin-bottom: 25px;
        }
        .range-slider-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--secondary-color);
        }
        .range-slider-group input[type="range"] {
            width: 100%;
            height: 8px;
            background-color: var(--border-color);
            border-radius: 10px;
            appearance: none;
            cursor: pointer;
            outline: none;
        }
        .range-slider-group input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: grab;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            margin-top: -6px; /* Center thumb on track */
        }
        .range-slider-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: grab;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .range-slider-group span {
            font-size: 0.85rem;
            color: var(--text-color);
            display: block;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="header">
        <div class="container">
        <nav class="navbar">
            <a href="#top" class="logo">Sailesh<span>Sitaula</span></a>

            <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
            </div>
            
            <div class="nav-menu">
            <ul class="nav-list">
                <li class="nav-item"><a href="#experience" class="nav-link">Experience</a></li>
                <li class="nav-item"><a href="#projects" class="nav-link">Projects</a></li>
                <li class="nav-item"><a href="#skills" class="nav-link">Skills</a></li>
                <li class="nav-item"><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            </div>
        </nav>
        </div>
    </header>

    <main class="container">

        <section id="dashboard" class="section">
            <div class="card-panel">
                <h2 class="section-title">Decision Support Dashboard</h2>
                <p class="text-center">This dashboard translates the complex findings of the "Optimizing Cold Storage Commodity Resale" report into an interactive tool. Its purpose is to help supply chain managers identify commodities with the highest potential for profitable resale by analyzing historical price data against shelf-life constraints, ultimately aiming to improve ROI and reduce waste.</p>
            </div>

            <div class="grid-layout grid-cols-3" style="margin-top: 30px;">
                <div class="dashboard-info-card">
                    <h3>Most Profitable (Simulated)</h3>
                    <p id="top-profitable" style="color: var(--success-color);">Potato Red</p>
                    <p>Highest avg. profit per trade</p>
                </div>
                <div class="dashboard-info-card">
                    <h3>Fastest Turnover</h3>
                    <p id="top-turnover" style="color: var(--warning-color);">Tomato Big(Nepali)</p>
                    <p>Shortest avg. holding duration</p>
                </div>
                <div class="dashboard-info-card">
                    <h3>Highest Storage Efficiency</h3>
                    <p id="top-efficiency" style="color: var(--accent-color);">Chilli Dry</p>
                    <p>Highest simulated profit per volume unit</p>
                </div>
            </div>
            <div class="card-panel" style="margin-top: 30px;">
                <h3 style="margin-bottom: 20px;">Commodity Shelf-Life Distribution</h3>
                <p style="margin-bottom: 20px;">Commodities are grouped into strategic categories based on their minimum shelf life. This fundamental characteristic dictates the time window available for price appreciation and heavily influences the feasibility of a storage-and-resale strategy. Short-life items demand rapid, predictable price movements, while long-life items allow for capitalizing on broader trends.</p>
                <div class="chart-container">
                    <canvas id="shelfLifeChart"></canvas>
                </div>
            </div>
        </section>

        <div class="my-12" style="border-top: 1px solid var(--border-color); margin: 60px 0;"></div>

        <section id="explorer" class="section">
            <div class="card-panel">
                <h2 class="section-title">Commodity Explorer</h2>
                <p class="text-center">This section allows for an in-depth exploration of individual commodities. The chart below plots each commodity's price volatility against its minimum shelf life, revealing the fundamental risk-reward landscape. High volatility offers profit potential but is risky for items with a short shelf life. Use the chart and table to select commodities and view their detailed price history and key metrics.</p>
            </div>
            <div class="card-panel" style="margin-top: 30px;">
                <h3 style="margin-bottom: 20px;">Volatility vs. Shelf Life</h3>
                <div class="chart-container">
                    <canvas id="volatilityChart"></canvas>
                </div>
            </div>

            <div class="grid-layout grid-cols-2" style="margin-top: 30px;">
                <div class="card-panel" style="grid-column: span 2;">
                    <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; margin-bottom: 20px; gap: 15px;">
                        <h3 style="margin: 0;">Commodity Data</h3>
                        <input type="text" id="commodity-filter" placeholder="🔎 Filter by name..." style="width: 100%; max-width: 250px; padding: 10px 15px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 1rem; font-family: 'Roboto', sans-serif;">
                    </div>
                    <div class="table-container">
                        <table class="w-full text-sm text-left text-slate-500 table-sortable">
                            <thead>
                                <tr>
                                    <th scope="col" class="px-6 py-3" data-sort="name">Commodity</th>
                                    <th scope="col" class="px-6 py-3" data-sort="minShelfLife">Min Shelf Life (Days)</th>
                                    <th scope="col" class="px-6 py-3" data-sort="avgPrice">Avg. Price (NPR)</th>
                                    <th scope="col" class="px-6 py-3" data-sort="volatility">Volatility (Annualized)</th>
                                    <th scope="col" class="px-6 py-3" data-sort="unit">Unit</th>
                                </tr>
                            </thead>
                            <tbody id="commodity-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-panel">
                    <h3 style="margin-bottom: 20px;">Price History</h3>
                    <p id="price-chart-commodity-name" style="font-size: 1.1rem; font-weight: 600; color: var(--primary-color); margin-bottom: 10px;">Select a commodity</p>
                    <div class="chart-container">
                        <canvas id="priceHistoryChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <div class="my-12" style="border-top: 1px solid var(--border-color); margin: 60px 0;"></div>

        <section id="framework" class="section">
            <div class="card-panel">
                <h2 class="section-title">Model Framework</h2>
                <p class="text-center">The recommendation engine follows a systematic, multi-stage process to transform raw historical data into actionable insights. This framework ensures that commodity rankings are based on a holistic assessment of price predictability, simulated profitability, and operational feasibility, all while strictly adhering to shelf-life constraints. Hover over each step to learn more.</p>
            </div>
            <div style="display: flex; flex-direction: column; gap: 20px; margin-top: 30px;">
                <div class="process-step">
                    <div class="icon">📊</div>
                    <h4>1. Data Analysis</h4>
                    <p>Analyze historical price trends, volatility, and shelf-life data for each commodity to establish a baseline profile.</p>
                </div>
                <div class="process-step">
                    <div class="icon">🔮</div>
                    <h4>2. Price Forecasting</h4>
                    <p>Use ARIMA time-series models to forecast future price movements based on past patterns, a key input for the simulation.</p>
                </div>
                <div class="process-step">
                    <div class="icon">⚙️</div>
                    <h4>3. Strategy Simulation</h4>
                    <p>Simulate buying and selling based on defined strategies (e.g., trend following, profit targets), enforcing shelf-life expiry as a hard constraint.</p>
                </div>
                <div class="process-step">
                    <div class="icon">🏆</div>
                    <h4>4. Weighted Ranking</h4>
                    <p>Rank commodities using a multi-criteria model that scores them on profit, turnover speed, and storage efficiency to produce final recommendations.</p>
                </div>
            </div>
        </section>

        <div class="my-12" style="border-top: 1px solid var(--border-color); margin: 60px 0;"></div>

        <section id="recommendations" class="section">
            <div class="card-panel">
                <h2 class="section-title">Interactive Recommendations</h2>
                <p class="text-center">This is the core output of the decision-support model. The table below ranks commodities based on their overall suitability for a buy-store-resell strategy. <strong>Use the sliders to adjust the weights</strong> of different business priorities. This will dynamically recalculate the scores and re-rank the commodities, allowing you to tailor the recommendations to your specific goals, whether it's maximizing raw profit, ensuring fast turnover, or optimizing storage space.</p>
            </div>
            <div class="grid-layout grid-cols-2" style="margin-top: 30px;">
                <div class="card-panel">
                    <h3 style="margin-bottom: 30px;">Adjust Your Priorities</h3>
                    <div class="range-slider-group">
                        <label for="profit-weight">Profitability Focus</label>
                        <input id="profit-weight" type="range" min="0" max="100" value="40" style="accent-color: var(--success-color);">
                        <span>How important is maximizing profit per trade?</span>
                    </div>
                    <div class="range-slider-group">
                        <label for="turnover-weight">Turnover Speed</label>
                        <input id="turnover-weight" type="range" min="0" max="100" value="30" style="accent-color: var(--warning-color);">
                        <span>How important is selling stock quickly?</span>
                    </div>
                    <div class="range-slider-group">
                        <label for="efficiency-weight">Storage Efficiency</label>
                        <input id="efficiency-weight" type="range" min="0" max="100" value="30" style="accent-color: var(--accent-color);">
                        <span>How important is profit per unit of storage space?</span>
                    </div>
                </div>
                <div class="card-panel" style="grid-column: span 1;">
                    <h3 style="margin-bottom: 20px;">Top Ranked Commodities</h3>
                    <div class="table-container">
                        <table class="w-full text-sm text-left text-slate-500">
                            <thead>
                                <tr>
                                    <th scope="col" class="px-6 py-3">Rank</th>
                                    <th scope="col" class="px-6 py-3">Commodity</th>
                                    <th scope="col" class="px-6 py-3">Overall Score</th>
                                    <th scope="col" class="px-6 py-3">Avg. Profit</th>
                                    <th scope="col" class="px-6 py-3">Avg. Holding (Days)</th>
                                    <th scope="col" class="px-6 py-3">Annual Turnover</th>
                                </tr>
                            </thead>
                            <tbody id="recommendations-table-body">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-left">
          <p>&copy; 2025 Sailesh Sitaula. All Rights Reserved.</p>
  </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Hamburger menu functionality from index.html
        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            const navLinks = document.querySelectorAll('.nav-link');

            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });

            // Smooth scrolling and active link highlighting for sections
            const sections = document.querySelectorAll('section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-30% 0px -30% 0px', threshold: 0 }); // Adjusted rootMargin for better activation

            sections.forEach(section => observer.observe(section));

            // Back to top button visibility (from index.html)
            const backToTopButton = document.querySelector('.back-to-top');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) { // Show button after scrolling down 300px
                    backToTopButton.style.display = 'flex';
                } else {
                    backToTopButton.style.display = 'none';
                }
            });
        });

        // Existing JavaScript from project-3.html, adapted for new HTML structure/classes
        // NOTE: This JavaScript section will require careful manual testing and potential re-writing
        // because the underlying HTML structure and class names have been significantly altered
        // from Tailwind to custom CSS. Specifically, Chart.js might need adjustments for
        // responsive sizing within the new layout, and the highlight/filter logic for the table
        // will need to target the new classes.

        document.addEventListener('DOMContentLoaded', () => {

            const SIMULATED_DATA = {
                commodities: [
                    { name: 'Tomato Big(Nepali)', minShelfLife: 7, avgPrice: 55.2, volatility: 0.45, unit: 'Kg' },
                    { name: 'Potato Red', minShelfLife: 60, avgPrice: 35.8, volatility: 0.22, unit: 'Kg' },
                    { name: 'Onion Dry (Indian)', minShelfLife: 30, avgPrice: 70.1, volatility: 0.35, unit: 'Kg' },
                    { name: 'Carrot(Local)', minShelfLife: 150, avgPrice: 65.5, volatility: 0.28, unit: 'Kg' },
                    { name: 'Fish Fresh', minShelfLife: 2, avgPrice: 280.0, volatility: 0.65, unit: 'Kg' },
                    { name: 'Apple(Jholey)', minShelfLife: 90, avgPrice: 150.7, volatility: 0.18, unit: 'Kg' },
                    { name: 'Gundruk', minShelfLife: 365, avgPrice: 250.0, volatility: 0.12, unit: 'Kg' },
                    { name: 'Chilli Dry', minShelfLife: 180, avgPrice: 310.5, volatility: 0.31, unit: 'Kg' },
                    { name: 'Cabbage(Local)', minShelfLife: 14, avgPrice: 40.3, volatility: 0.48, unit: 'Kg' },
                    { name: 'Cauli Local', minShelfLife: 10, avgPrice: 60.9, volatility: 0.52, unit: 'Kg' },
                    { name: 'Ginger', minShelfLife: 60, avgPrice: 120.0, volatility: 0.25, unit: 'Kg' },
                    { name: 'Garlic Dry', minShelfLife: 120, avgPrice: 200.0, volatility: 0.29, unit: 'Kg' },
                    { name: 'Mushroom(Kanya)', minShelfLife: 4, avgPrice: 180.0, volatility: 0.75, unit: 'Kg' },
                    { name: 'Raddish White(Local)', minShelfLife: 7, avgPrice: 25.0, volatility: 0.55, unit: 'Kg' },
                    { name: 'Banana', minShelfLife: 5, avgPrice: 85.0, volatility: 0.40, unit: 'Doz' },
                ],
                simulationResults: {
                    'Tomato Big(Nepali)': { avgProfit: 5.1, avgHolding: 4, profitPerVolume: 5.1 },
                    'Potato Red': { avgProfit: 8.5, avgHolding: 45, profitPerVolume: 9.5 },
                    'Onion Dry (Indian)': { avgProfit: 12.3, avgHolding: 22, profitPerVolume: 14.8 },
                    'Carrot(Local)': { avgProfit: 15.2, avgHolding: 95, profitPerVolume: 16.1 },
                    'Fish Fresh': { avgProfit: 10.5, avgHolding: 1, profitPerVolume: 8.5 },
                    'Apple(Jholey)': { avgProfit: 20.8, avgHolding: 70, profitPerVolume: 22.3 },
                    'Gundruk': { avgProfit: 35.0, avgHolding: 150, profitPerVolume: 40.0 },
                    'Chilli Dry': { avgProfit: 45.3, avgHolding: 110, profitPerVolume: 55.2 },
                    'Cabbage(Local)': { avgProfit: 6.2, avgHolding: 8, profitPerVolume: 5.5 },
                    'Cauli Local': { avgProfit: 7.8, avgHolding: 6, profitPerVolume: 7.1 },
                    'Ginger': { avgProfit: 18.1, avgHolding: 40, profitPerVolume: 20.2 },
                    'Garlic Dry': { avgProfit: 30.5, avgHolding: 85, profitPerVolume: 33.0 },
                    'Mushroom(Kanya)': { avgProfit: 15.5, avgHolding: 2, profitPerVolume: 12.1 },
                    'Raddish White(Local)': { avgProfit: 4.3, avgHolding: 5, profitPerVolume: 4.0 },
                    'Banana': { avgProfit: 9.0, avgHolding: 3, profitPerVolume: 7.5 },
                },
                priceHistory: {}
            };

            function generatePriceHistory(basePrice, volatility, length = 100) {
                const history = [];
                let price = basePrice;
                for (let i = 0; i < length; i++) {
                    const change = (Math.random() - 0.48) * volatility * price;
                    price += change;
                    price = Math.max(price, basePrice * 0.5);
                    history.push({
                        x: new Date(2024, 0, 1 + i).toLocaleDateString(),
                        y: price
                    });
                }
                return history;
            }
            SIMULATED_DATA.commodities.forEach(c => {
                SIMULATED_DATA.priceHistory[c.name] = generatePriceHistory(c.avgPrice, c.volatility / 5, 100);
            });

            const chartInstances = {};

            function renderShelfLifeChart() {
                const categories = {
                    'Short (< 15 days)': 0,
                    'Medium (15-90 days)': 0,
                    'Long (> 90 days)': 0
                };
                SIMULATED_DATA.commodities.forEach(c => {
                    if (c.minShelfLife < 15) categories['Short (< 15 days)']++;
                    else if (c.minShelfLife <= 90) categories['Medium (15-90 days)']++;
                    else categories['Long (> 90 days)']++;
                });

                const ctx = document.getElementById('shelfLifeChart').getContext('2d');
                if(chartInstances.shelfLife) chartInstances.shelfLife.destroy();
                chartInstances.shelfLife = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(categories),
                        datasets: [{
                            label: 'Number of Commodities',
                            data: Object.values(categories),
                            backgroundColor: ['var(--warning-color)', 'var(--success-color)', 'var(--accent-color)'], // Adjusted for new color vars
                            borderColor: '#ffffff',
                            borderWidth: 4,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed !== null) {
                                            label += context.parsed;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function renderVolatilityChart() {
                const data = {
                    datasets: [{
                        label: 'Commodities',
                        data: SIMULATED_DATA.commodities.map(c => ({
                            x: c.minShelfLife,
                            y: c.volatility,
                            name: c.name
                        })),
                        backgroundColor: 'rgba(37, 99, 235, 0.6)', // Using primary color for consistency
                        borderColor: 'rgba(37, 99, 235, 1)',
                        pointRadius: 6,
                        pointHoverRadius: 9,
                    }]
                };

                const ctx = document.getElementById('volatilityChart').getContext('2d');
                if(chartInstances.volatility) chartInstances.volatility.destroy();
                chartInstances.volatility = new Chart(ctx, {
                    type: 'scatter',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'linear',
                                position: 'bottom',
                                title: {
                                    display: true,
                                    text: 'Minimum Shelf Life (Days)'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Annualized Volatility'
                                }
                            }
                        },
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return context.raw.name;
                                    }
                                }
                            }
                        },
                        onClick: (evt, elements) => {
                            if (elements.length > 0) {
                                const commodityName = elements[0].element.$context.raw.name;
                                highlightCommodity(commodityName);
                            }
                        }
                    }
                });
            }

            let currentCommodityTable = [...SIMULATED_DATA.commodities];
            let sortConfig = { key: 'name', dir: 'asc' };

            function renderCommodityTable() {
                const tbody = document.getElementById('commodity-table-body');
                const filterText = document.getElementById('commodity-filter').value.toLowerCase();

                const sortedData = [...currentCommodityTable].sort((a, b) => {
                    if (a[sortConfig.key] < b[sortConfig.key]) return sortConfig.dir === 'asc' ? -1 : 1;
                    if (a[sortConfig.key] > b[sortConfig.key]) return sortConfig.dir === 'asc' ? 1 : -1;
                    return 0;
                });

                const filteredData = sortedData.filter(c => c.name.toLowerCase().includes(filterText));

                tbody.innerHTML = filteredData.map(c => `
                    <tr id="row-${c.name.replace(/\s|\(|\)/g, '-')}" class="bg-white border-b hover-bg-slate-50 cursor-pointer" onclick="highlightCommodity('${c.name}')">
                        <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">${c.name}</td>
                        <td class="px-6 py-4">${c.minShelfLife}</td>
                        <td class="px-6 py-4">${c.avgPrice.toFixed(2)}</td>
                        <td class="px-6 py-4">${c.volatility.toFixed(2)}</td>
                        <td class="px-6 py-4">${c.unit}</td>
                    </tr>
                `).join('');

                updateSortHeaders();
            }

            function updateSortHeaders() {
                document.querySelectorAll('.table-sortable th').forEach(th => {
                    th.classList.remove('sorted-asc', 'sorted-desc');
                    if (th.dataset.sort === sortConfig.key) {
                        th.classList.add(sortConfig.dir === 'asc' ? 'sorted-asc' : 'sorted-desc');
                    }
                });
            }

            document.querySelector('.table-sortable thead').addEventListener('click', e => {
                const key = e.target.dataset.sort;
                if (!key) return;
                if (sortConfig.key === key) {
                    sortConfig.dir = sortConfig.dir === 'asc' ? 'desc' : 'asc';
                } else {
                    sortConfig.key = key;
                    sortConfig.dir = 'asc';
                }
                renderCommodityTable();
            });

            document.getElementById('commodity-filter').addEventListener('input', renderCommodityTable);


            function renderPriceHistoryChart(commodityName) {
                const historyData = SIMULATED_DATA.priceHistory[commodityName];
                if (!historyData) return;

                const ctx = document.getElementById('priceHistoryChart').getContext('2d');
                if(chartInstances.priceHistory) chartInstances.priceHistory.destroy();

                document.getElementById('price-chart-commodity-name').textContent = commodityName;

                chartInstances.priceHistory = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: historyData.map(d => d.x),
                        datasets: [{
                            label: 'Average Price',
                            data: historyData.map(d => d.y),
                            borderColor: 'var(--primary-color)', // Adjusted for new color vars
                            backgroundColor: 'rgba(37, 99, 235, 0.1)', // Adjusted for new color vars
                            borderWidth: 2,
                            pointRadius: 0,
                            tension: 0.1,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                title: { display: true, text: 'Price (NPR)' }
                            },
                            x: {
                                ticks: { display: false }
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            let lastHighlightedRow = null;
            window.highlightCommodity = (commodityName) => {
                renderPriceHistoryChart(commodityName);
                if(lastHighlightedRow) lastHighlightedRow.classList.remove('highlighted'); // Use new class name
                const row = document.getElementById(`row-${commodityName.replace(/\s|\(|\)/g, '-')}`);
                if(row) {
                    row.classList.add('highlighted'); // Use new class name
                    lastHighlightedRow = row;
                    row.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }


            function calculateRecommendations() {
                const profitWeight = parseFloat(document.getElementById('profit-weight').value);
                const turnoverWeight = parseFloat(document.getElementById('turnover-weight').value);
                const efficiencyWeight = parseFloat(document.getElementById('efficiency-weight').value);

                const totalWeight = profitWeight + turnoverWeight + efficiencyWeight;
                if(totalWeight === 0) {
                    renderRecommendations([]);
                    return;
                }

                const normalizedWeights = {
                    profit: profitWeight / totalWeight,
                    turnover: turnoverWeight / totalWeight,
                    efficiency: efficiencyWeight / totalWeight
                };

                const results = SIMULATED_DATA.commodities.map(c => {
                    const sim = SIMULATED_DATA.simulationResults[c.name];
                    return {
                        name: c.name,
                        avgProfit: sim.avgProfit,
                        avgHolding: sim.avgHolding,
                        turnover: sim.avgHolding > 0 ? (365 / sim.avgHolding).toFixed(1) : '∞',
                        profitPerVolume: sim.profitPerVolume,
                    };
                });

                const maxProfit = Math.max(...results.map(r => r.avgProfit));
                const maxHolding = Math.max(...results.map(r => r.avgHolding));
                const maxEfficiency = Math.max(...results.map(r => r.profitPerVolume));

                const scoredResults = results.map(r => {
                    const profitScore = (r.avgProfit / maxProfit) * 100;
                    const turnoverScore = (1 - (r.avgHolding / maxHolding)) * 100; // Lower holding is better
                    const efficiencyScore = (r.profitPerVolume / maxEfficiency) * 100;

                    const totalScore = (profitScore * normalizedWeights.profit) +
                                       (turnoverScore * normalizedWeights.turnover) +
                                       (efficiencyScore * normalizedWeights.efficiency);
                    return { ...r, totalScore };
                });

                scoredResults.sort((a, b) => b.totalScore - a.totalScore);
                renderRecommendations(scoredResults);

                if(scoredResults.length > 0) {
                    document.getElementById('top-profitable').textContent = [...results].sort((a,b) => b.avgProfit - a.avgProfit)[0].name;
                    document.getElementById('top-turnover').textContent = [...results].sort((a,b) => a.avgHolding - b.avgHolding)[0].name;
                    document.getElementById('top-efficiency').textContent = [...results].sort((a,b) => b.profitPerVolume - a.profitPerVolume)[0].name;
                }
            }

            function renderRecommendations(rankedList) {
                const tbody = document.getElementById('recommendations-table-body');
                tbody.innerHTML = rankedList.map((r, index) => `
                    <tr class="bg-white border-b">
                        <td class="px-6 py-4 font-bold text-slate-800">${index + 1}</td>
                        <td class="px-6 py-4 font-medium text-lime-700 whitespace-nowrap">${r.name}</td>
                        <td class="px-6 py-4 font-semibold">${r.totalScore.toFixed(1)}</td>
                        <td class="px-6 py-4" style="color: var(--success-color);">${r.avgProfit.toFixed(2)}</td>
                        <td class="px-6 py-4" style="color: var(--warning-color);">${r.avgHolding}</td>
                        <td class="px-6 py-4" style="color: var(--accent-color);">${r.turnover}</td>
                    </tr>
                `).join('');
            }

            document.getElementById('profit-weight').addEventListener('input', calculateRecommendations);
            document.getElementById('turnover-weight').addEventListener('input', calculateRecommendations);
            document.getElementById('efficiency-weight').addEventListener('input', calculateRecommendations);


            // This section was for initial fade-in, but with the new header and consistent styling,
            // it might not be strictly necessary or might need re-evaluation for smooth transitions.
            // function setupNavLinks() {
            //     const sections = document.querySelectorAll('section');
            //     const navLinks = document.querySelectorAll('.nav-link');

            //     const observer = new IntersectionObserver((entries) => {
            //         entries.forEach(entry => {
            //             if (entry.isIntersecting) {
            //                 navLinks.forEach(link => {
            //                     link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
            //                 });
            //             }
            //             entry.target.classList.toggle('visible', entry.isIntersecting);
            //         });
            //     }, { rootMargin: '-50% 0px -50% 0px', threshold: 0 });

            //     sections.forEach(section => observer.observe(section));
            // }

            function init() {
                renderShelfLifeChart();
                renderVolatilityChart();
                renderCommodityTable();
                calculateRecommendations();
                renderPriceHistoryChart(SIMULATED_DATA.commodities[0].name);
                highlightCommodity(SIMULATED_DATA.commodities[0].name);
                // setupNavLinks(); // Removed or commented out, integrate with main header JS
            }

            init();
        });
    </script>
</body>
</html>
